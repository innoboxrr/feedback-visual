import { format } from './formatUtils.js';

export const formatDirective = {

    mounted(el, binding) {

        const inputElement = el.tagName.toLowerCase() === 'input' ? el : el.querySelector('input');

        if (!inputElement) {

            console.warn('v-format directive requires an input element');

            return;

        }

        if (binding.value.mask && binding.value.format) {

            el.dataset.mask = binding.value.mask;

            el.dataset.format = binding.value.format;

            inputElement.addEventListener('input', function(event) {    

                format(inputElement, 'input', event);

            });

            inputElement.addEventListener('paste', function(event) {    

                format(inputElement, 'paste', event);

            });

        }

    }

};
